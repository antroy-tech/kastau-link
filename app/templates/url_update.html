{% extends 'layout.html' %}


{% block content %}
<section class="dark:bg-neutral-800 min-h-screen">
    <div class="px-4 py-16 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-16">
        <div class="max-w-2xl mx-auto sm:max-w-xl md:max-w-2xl">
            <div class="text-center">
                <div class="max-w-xl -mt-12 mb-10 md:mx-auto sm:text-center lg:max-w-2xl md:mb-8">
                    <img src="{{ url_for ('static', filename='img/logo.png') }}" class="-mb-10 mx-auto w-36 md:w-1/3"
                        alt="Logo Kastau Link">

                    <p class="mt-6 text-neutral-500 dark:text-neutral-300">
                        Ubah link yang telah disingkat: <a href="{{request.host_url+link.short_id }}" target="_blank"
                            class="text-indigo-600">{{request.host_url.rpartition("//")[-1].partition("/")[0]}}/{{
                            link.short_id }}</a>
                    </p>
                </div>
                <form action="" method="post">
                    <div class="flex flex-col items-center w-full mb-4 md:flex-row md:px-16">
                        <div class="mr-2 w-full">
                            <input type="url" name="url" value="{{ link.original_url }}"
                                class="flex-grow w-full h-12 px-4 mb-3 ml-1 md:ml-0 md:mb-0 transition duration-200 bg-white border border-neutral-300 rounded shadow-sm appearance-none focus:border-indigo-700 focus:outline-none focus:shadow-outline" />
                            <!-- Handling Flash Messages -->
                            {% with messages = get_flashed_messages(with_categories=true) %}
                            {% if messages %}
                            {% for category, message in messages %}
                            <p class="md:mt-2 text-left text-sm text-{{ category }}-600 dark:text-{{ category }}-500">{{
                                message }}</p>
                            {% endfor %}
                            {% endif %}
                            {% endwith %}
                        </div>
                        <button type="submit"
                            class="inline-flex items-center justify-center w-full h-12 px-6 {% for messages in get_flashed_messages() %}md:-mt-7{% endfor %} font-medium tracking-wide text-white transition duration-200 rounded shadow-md md:w-auto bg-indigo-700 hover:bg-indigo-400 focus:shadow-outline focus:outline-none">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6 mr-2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                            </svg>
                            Ubah
                        </button>
                    </div>
                </form>
                <div class="block md:hidden">
                    <br>
                    <hr>
                    <br>
                </div>
                <div class="flex flex-col gap-2 md:flex-row md:justify-evenly md:mx-32 md:my-7">
                    <a class="inline-block px-6 py-2 text-sm font-medium text-white bg-indigo-700 border border-indigo-600 rounded active:text-indigo-500 hover:bg-indigo-600 hover:text-white focus:outline-none focus:ring"
                        href="{{ url_for('main.index') }}">
                        Kembali ke home
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock content %}